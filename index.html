<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- SEO 최적화 -->
    <title>Beat Drum - 무료 온라인 드럼 머신 | 실시간 리듬 생성기</title>
    <meta name="description" content="브라우저에서 바로 사용하는 무료 드럼 머신! 12가지 드럼 사운드로 실시간 비트를 만들어보세요. 모바일과 데스크톱 모두 지원.">
    <meta name="keywords" content="드럼머신, 드럼패드, 온라인드럼, 리듬생성기, 무료드럼, 웹드럼, beat maker, drum machine">
    <meta name="author" content="Beat Drum">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="Beat Drum - 무료 온라인 드럼 머신">
    <meta property="og:description" content="브라우저에서 바로 사용하는 무료 드럼 머신! 실시간으로 드럼 비트를 만들어보세요.">
    <meta property="og:image" content="">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="">
    <meta property="twitter:title" content="Beat Drum - 무료 온라인 드럼 머신">
    <meta property="twitter:description" content="브라우저에서 바로 사용하는 무료 드럼 머신! 실시간으로 드럼 비트를 만들어보세요.">
    <meta property="twitter:image" content="">
    
    <!-- 모바일 최적화 -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- 터치 최적화 -->
    <meta name="touch-action" content="manipulation">
    
    <!-- 캐싱 최적화 -->
    <meta http-equiv="Cache-Control" content="max-age=31536000">
    
    <!-- iOS Safari 최적화 -->
    <meta name="apple-mobile-web-app-title" content="Beat Drum">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJTNi40OCwyMiAxMiAyMlMyMiAxNy41MiAyMiAxMlMxNy41MiAyIDEyIDJaTTEwIDEwSDhWOEgxMFYxMFpNMTYgMTBIMTRWOEgxNlYxMFpNMTAgMTZIOFYxNEgxMFYxNlpNMTYgMTZIMTRWMTRIMTZWMTZaIiBmaWxsPSIjNjY2Ii8+Cjwvc3ZnPgo=">
    <meta name="theme-color" content="#1e1e1e">
    
    <!-- 폴더 이동 시에도 상대 경로가 정상 작동하도록 base 설정 -->
    <base href="./">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="css/style.css" as="style">
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🥁</text></svg>">
</head>
<body>
    <div class="container">
        <!-- 히어로 헤더 -->
        <header class="hero-header">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="hero-icon">🥁</span>
                    <span class="title-main">Beat Drum</span>
                </h1>
                <p class="hero-subtitle">브라우저에서 바로 만드는 드럼 비트</p>
                <div class="hero-features">
                    <span class="feature-tag">🎵 12가지 드럼 사운드</span>
                    <span class="feature-tag">📱 모바일 지원</span>
                    <span class="feature-tag">💾 패턴 저장</span>
                </div>
                <button class="cta-button" id="startButton">
                    <span class="cta-text">지금 시작하기</span>
                    <span class="cta-icon">🎶</span>
                </button>
            </div>
        </header>

        <!-- 간단 사용법 -->
        <section class="quick-guide" id="quickGuide" style="display: none;">
            <div class="guide-content">
                <h3 class="guide-title">🎯 간단한 사용법</h3>
                <div class="guide-steps">
                    <div class="guide-step">
                        <span class="step-number">1</span>
                        <span class="step-text">BPM을 조정하세요</span>
                    </div>
                    <div class="guide-step">
                        <span class="step-number">2</span>
                        <span class="step-text">드럼 패드를 터치하여 리듬을 만드세요</span>
                    </div>
                    <div class="guide-step">
                        <span class="step-number">3</span>
                        <span class="step-text">▶️ Play 버튼으로 재생하세요</span>
                    </div>
                </div>
                <button class="guide-close" id="guideClose">시작하기 ✨</button>
            </div>
        </section>

        <!-- TEMPO 컨트롤 (상단 배치) -->
        <div class="controls" id="mainControls">
            <div class="tempo-control">
                <div class="bpm-display">
                    <div class="bpm-label">TEMPO</div>
                    <div class="bpm-value-container">
                        <span id="bpmValue" class="bpm-value">120</span>
                        <span class="bpm-unit">BPM</span>
                    </div>
                    <div class="bpm-genre" id="bpmGenre">Pop/Rock</div>
                </div>
                
                <div class="bpm-control-container">
                    <div class="bpm-knob-container">
                        <div class="bpm-knob" id="bpmKnob">
                            <div class="knob-indicator"></div>
                            <div class="knob-center"></div>
                        </div>
                        <div class="bpm-range-labels">
                            <span class="range-label min">60</span>
                            <span class="range-label max">200</span>
                        </div>
                    </div>
                    
                    <div class="bpm-buttons">
                        <button class="bpm-btn" id="bpmDown">−</button>
                        <button class="bpm-btn" id="bpmUp">+</button>
                    </div>
                </div>
                
                <div class="bpm-visualizer">
                    <div class="beat-indicator" id="beatIndicator">
                        <div class="beat-pulse"></div>
                    </div>
                </div>
                
                <input type="range" id="bpmSlider" min="60" max="200" value="120" class="bpm-slider-hidden">
            </div>
        </div>

        <!-- 통합 컨트롤 패널 -->
        <div class="unified-controls">
            <!-- 1. 재생 컨트롤 영역 -->
            <div class="control-section playback-section">
                <div class="section-header">
                    <h3>🎮 재생 컨트롤</h3>
                </div>
                <div class="playback-controls">
                    <button id="playBtn" class="btn btn-play">▶️ Play</button>
                    <button id="pauseBtn" class="btn btn-pause">⏸️ Pause</button>
                    <button id="stopBtn" class="btn btn-stop">⏹️ Stop</button>
                    <button id="clearBtn" class="btn btn-secondary">🗑️ Clear</button>
                    <button id="randomBtn" class="btn btn-secondary">🎲 Random</button>
                </div>
            </div>

            <!-- 2. 패턴 길이 컨트롤 영역 -->
            <div class="control-section pattern-section">
                <div class="section-header">
                    <h3>📏 패턴 길이</h3>
                </div>
                <div class="pattern-length-buttons">
                    <button class="length-button active" data-measures="1">1마디 (16스텝)</button>
                    <button class="length-button" data-measures="2">2마디 (32스텝)</button>
                    <button class="length-button" data-measures="4">4마디 (64스텝)</button>
                    <button class="length-button" data-measures="8">8마디 (128스텝)</button>
                </div>
            </div>

            <!-- 3. 저장/불러오기 영역 -->
            <div class="control-section save-section">
                <div class="section-header">
                    <h3>💾 저장/불러오기</h3>
                </div>
                <div class="save-buttons">
                    <button id="saveBtn" class="btn btn-save">💾 저장</button>
                    <button id="loadBtn" class="btn btn-load">📁 불러오기</button>
                    <button id="downloadBtn" class="btn btn-download">⬇️ 다운로드</button>
                </div>
            </div>

            <!-- 4. 프리셋 영역 -->
            <div class="control-section preset-section">
                <div class="section-header">
                    <h3>🎵 프리셋</h3>
                </div>
                <div class="preset-slots">
                    <button class="preset-btn" data-slot="1">1</button>
                    <button class="preset-btn" data-slot="2">2</button>
                    <button class="preset-btn" data-slot="3">3</button>
                    <button class="preset-btn" data-slot="4">4</button>
                    <button class="preset-btn" data-slot="5">5</button>
                </div>
            </div>

            <input type="file" id="fileInput" accept=".json" style="display: none;">
        </div>

        <!-- 동적 시퀀서 그리드 -->
        <div class="sequencer" id="sequencer">
            <!-- JavaScript에서 동적으로 생성됨 -->
        </div>

        <!-- 현재 스텝 표시기 -->
        <div class="current-step-indicator">
            <div class="step-progress"></div>
        </div>

        <!-- 정보 패널 -->
        <div class="info-panel">
            <div class="status">
                <span id="statusText">Ready</span> | 
                Step: <span id="currentStep">-</span> | 
                BPM: <span id="currentBpm">120</span>
            </div>
        </div>
    </div>

    <script src="js/drumSounds.js"></script>
    <script src="js/sequencer.js"></script>
    <script src="js/patternStorage.js"></script>
    <script src="js/bpmController.js"></script>
    <script src="js/app.js"></script>
</body>
</html>